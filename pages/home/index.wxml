<view class="container home">
  <nav />
  <view class="home__content">
    <t-tabs defaultValue="recommend">
      <t-tab-panel label="推荐" value="recommend">
        <t-pull-down-refresh value="{{enable}}" bind:refresh="onRefresh" loadingTexts="{{['下拉刷新', '松手刷新', '正在刷新', '刷新完成']}}">
          <view class="home__card-list">
            <t-swiper list="{{swiperList}}" navigation="{{ { type: 'dots-bar' } }}" height="488rpx" style="width: 340rpx" />
            <card wx:for="{{cardInfo}}" wx:key="index" desc="{{item.desc}}" url="{{item.url}}" tags="{{item.tags}}" />
          </view>
        </t-pull-down-refresh>
      </t-tab-panel>
      <t-tab-panel label="我的关注" value="follow">
        <!-- 设计稿没有，不做了 -->
      </t-tab-panel>
    </t-tabs>
  </view>
  <block>
    <view class="userinfo">
      <block wx:if="{{canIUseOpenData}}">
        <view class="userinfo-avatar" bindtap="bindViewTap">
          <open-data type="userAvatarUrl"></open-data>
        </view>
        <open-data type="userNickName"></open-data>
      </block>
      <block wx:elif="{{!hasUserInfo}}">
        <button wx:if="{{canIUseGetUserProfile}}" bindtap="getUserProfile"> 获取头像昵称 </button>
        <button wx:elif="{{canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo"> 获取头像昵称 </button>
        <view wx:else> 请使用1.4.4及以上版本基础库 </view>
      </block>
      <block wx:else>
        <image bindtap="bindViewTap" class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
        <text class="userinfo-nickname">{{userInfo.nickName}}</text>
      </block>
    </view>
    <view class="usermotto">
      <text class="user-motto">{{motto}}</text>
    </view>
    <view class="home-release">
      <t-button t-class="relese-button" theme="primary" size="large" icon="add" shape="round" bindtap="goRelease">发布</t-button>
    </view>
    <t-message id="t-message" />
  </block>
</view>